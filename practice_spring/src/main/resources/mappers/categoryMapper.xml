<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="categoryMapper">
    <select id="selectCategory" resultType="com.my.vo.categoryVO">
      		SELECT * FROM category where userID=#{userID} order by orderNo
    </select>
    <select id="selectCategoryOne" resultType="com.my.vo.categoryVO">
      		SELECT * FROM category where userID=#{userID} and categoryName=#{categoryName}
    </select>
    <insert id="insertCategory" parameterType="com.my.vo.categoryVO">
    	INSERT INTO category(categoryName,categoryNameKor,orderNo,userID)
		VALUES(#{categoryName},#{categoryNameKor},
		(SELECT IFNULL(MAX(orderNo) + 1, 1) FROM category c WHERE userID=#{userID}),#{userID});
    </insert>
    <update id="moveUp" parameterType="com.my.vo.categoryVO">
    	call moveUp(#{orderNo},#{userID})
    </update>
    <update id="moveDown" parameterType="com.my.vo.categoryVO">
    	call moveDown(#{orderNo},#{userID})
    </update>
    <delete id="deleteList" parameterType="com.my.vo.categoryVO">
    	call deleteList(#{orderNo},#{userID})
    </delete>
</mapper>